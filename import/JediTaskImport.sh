#!/bin/bash

echo "  *******************************  importing JediTasks table  *******************************"

sqoop import --direct --connect "jdbc:oracle:thin:@//db-d0002.cern.ch:10654/int8r.cern.ch" --table ATLAS_PANDA.JEDI_TASKS_13NOV2015 --username DMUSER -P --split-by JEDITASKID --as-avrodatafile --target-dir /atlas/analytics/jedi/tasks/until13nov --columns JEDITASKID, TASKNAME, STATUS, USERNAME, REQID, OLDSTATUS, CLOUD, SITE, PRODSOURCELABEL, WORKINGGROUP, VO, CORECOUNT, TASKTYPE, PROCESSINGTYPE, TASKPRIORITY, CURRENTPRIORITY, ARCHITECTURE, TRANSUSES, TRANSHOME, TRANSPATH, LOCKEDBY, TERMCONDITION, SPLITRULE, WALLTIME, WALLTIMEUNIT, OUTDISKCOUNT, OUTDISKUNIT, WORKDISKCOUNT, WORKDISKUNIT, RAMCOUNT, RAMUNIT, IOINTENSITY, IOINTENSITYUNIT, WORKQUEUE_ID, PROGRESS, FAILURERATE, ERRORDIALOG, COUNTRYGROUP, PARENT_TID, EVENTSERVICE, TICKETID, TICKETSYSTEMTYPE, SUPERSTATUS, CAMPAIGN, MERGERAMCOUNT, MERGERAMUNIT, MERGEWALLTIME, MERGEWALLTIMEUNIT, NUMTHROTTLED, MERGECORECOUNT, GOAL, CPUTIME, CPUTIMEUNIT, CPUEFFICIENCY, BASEWALLTIME, AMIFLAG_OLD, AMIFLAG, NUCLEUS, BASERAMCOUNT, LOCKEDTIME,STATECHANGETIME,THROTTLEDTIME,ASSESSMENTTIME,CREATIONDATE,MODIFICATIONTIME,STARTTIME,ENDTIME,FROZENTIME --map-column-java JEDITASKID=Long, TASKNAME=String, STATUS=String, USERNAME=String, REQID=Long, OLDSTATUS=String, CLOUD=String, SITE=String, PRODSOURCELABEL=String, WORKINGGROUP=String, VO=String, CORECOUNT=Long, TASKTYPE=String, PROCESSINGTYPE=String, TASKPRIORITY=Long, CURRENTPRIORITY=Long, ARCHITECTURE=String, TRANSUSES=String, TRANSHOME=String, TRANSPATH=String, LOCKEDBY=String, TERMCONDITION=String, SPLITRULE=String, WALLTIME=Long, WALLTIMEUNIT=String, OUTDISKCOUNT=Long, OUTDISKUNIT=String, WORKDISKCOUNT=Long, WORKDISKUNIT=String, RAMCOUNT=Long, RAMUNIT=String, IOINTENSITY=Long, IOINTENSITYUNIT=String, WORKQUEUE_ID=Integer, PROGRESS=Integer, FAILURERATE=Integer, ERRORDIALOG=String, COUNTRYGROUP=String, PARENT_TID=Long, EVENTSERVICE=Integer, TICKETID=String, TICKETSYSTEMTYPE=String, SUPERSTATUS=String, CAMPAIGN=String, MERGERAMCOUNT=Long, MERGERAMUNIT=String, MERGEWALLTIME=Long, MERGEWALLTIMEUNIT=String, NUMTHROTTLED=Integer, MERGECORECOUNT=Long, GOAL=Integer, CPUTIME=Long, CPUTIMEUNIT=String, CPUEFFICIENCY=Integer, BASEWALLTIME=Long, AMIFLAG_OLD=String, AMIFLAG=Integer, NUCLEUS=String, BASERAMCOUNT=Long

echo "DONE"


#JEDITASKID, TASKNAME, STATUS, USERNAME, REQID, OLDSTATUS, CLOUD, SITE, PRODSOURCELABEL, WORKINGGROUP, VO, CORECOUNT, TASKTYPE, PROCESSINGTYPE, TASKPRIORITY, CURRENTPRIORITY, ARCHITECTURE, TRANSUSES, TRANSHOME, TRANSPATH, LOCKEDBY, TERMCONDITION, SPLITRULE, WALLTIME, WALLTIMEUNIT, OUTDISKCOUNT, OUTDISKUNIT, WORKDISKCOUNT, WORKDISKUNIT, RAMCOUNT, RAMUNIT, IOINTENSITY, IOINTENSITYUNIT, WORKQUEUE_ID, PROGRESS, FAILURERATE, ERRORDIALOG, COUNTRYGROUP, PARENT_TID, EVENTSERVICE, TICKETID, TICKETSYSTEMTYPE, SUPERSTATUS, CAMPAIGN, MERGERAMCOUNT, MERGERAMUNIT, MERGEWALLTIME, MERGEWALLTIMEUNIT, NUMTHROTTLED, MERGECORECOUNT, GOAL, CPUTIME, CPUTIMEUNIT, CPUEFFICIENCY, BASEWALLTIME, AMIFLAG_OLD, AMIFLAG, NUCLEUS, BASERAMCOUNT, LOCKEDTIME,STATECHANGETIME,THROTTLEDTIME,ASSESSMENTTIME,CREATIONDATE,MODIFICATIONTIME,STARTTIME,ENDTIME,FROZENTIME